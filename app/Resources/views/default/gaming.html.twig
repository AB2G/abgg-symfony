{% extends 'base.html.twig' %}

{% block body %}
<div class="row">
  <div class="col-md-3 col-md-offset-1">
    <ul class="list-group">
      <a  class="list-group-item" href="{% block search_player %}{{ path('search_player', { 'game': game.name }) }}{% endblock %}">
      	<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      		Rechercher joueurs <span class="badge">{{searchUsers}}</span>
      </a>
      <a  class="list-group-item" href="{% block search_team %}{{ path('search_team',  { 'game': game.name }) }}{% endblock %}">
      	<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      		Rechercher équipes
      </a>
      {% if (is_granted("IS_AUTHENTICATED_REMEMBERED") )
      and (app.user.capitain != true) 
      and (app.user.team == null) 
      and (checkGame == games.name)
      and (app.user.tournament!=null) %}
        <a  class="list-group-item" href="{{ path('team_new' )}}">
	        	<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
	        	Inscrire une équipe
        </a>
      {%elseif (is_granted("IS_AUTHENTICATED_REMEMBERED") and (checkGame != games.name))
       or (is_granted("IS_AUTHENTICATED_REMEMBERED") and (app.user.tournament !=null)) %}
      {%else%}
      	<a  class="list-group-item" href="{{ path('fos_user_security_login' )}}">
      		<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
      			S'inscrire au tournoi
        </a>
      {%endif%}
    </ul>
  </div>
</div>
{%if entities%}
	<div class="row">
		<table class="table table-hover">
			<tr>
				<th>Nom Equipe</th>
				<th>Capitaine</th>
				<th>Joueur 1</th>
				<th>Joueur 2</th>
				<th>Joueur 3</th>
				<th>Joueur 4</th>
				<th>Joueur 5</th>
				<th>Joueur 6</th>
			</tr>
		{%for entity in entities%}
			{%if entity.validation != null%}
				<tr>
					<td>{{entity.name}}</td>
					<td>{{entity.captain}} 
						{%if entity.captain.tournament.systName == 'lol'%}
							- {{entity.captain.role.name}}
						{%endif%}
					</td>
					{%for player in entity.player%}
						<td>{{player.user.experience.username}}
						{%if entity.captain.tournament.systName == 'lol'%}
							 - {{player.role.name}}</td>
						{%endif%}
					{%endfor%}
				</tr>
			{%endif%}
		{%endfor%}
		</table>
	</div>
{%else%}
	<br><center><h1>Aucune équipe n'est actuellement valide/complète</h1></center>
	<center><img width="25%"  src="{{ asset('bundles/app/images/forever-alone.jpg') }}" /></center>
{%endif%}
{% endblock %}
